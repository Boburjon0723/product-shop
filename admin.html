<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
  <style>
    form {
      width: 300px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    input, select, button {
      padding: 8px;
    }
    img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      display: none;
      border-radius: 5px;
    }
  </style>
</head>
<body>

<h2>Mahsulot qo'shish</h2>

<form id="productForm">
  <input type="text" id="name" placeholder="Mahsulot nomi" required>

  <input type="number" id="price" placeholder="Narxi" required>

  <!-- Rasm yuklash -->
  <input type="file" id="image" accept="image/*" required>

  <img id="preview">

  <select id="category" required>
    <option value="">Kategoriya tanlang</option>
    <option value="samsung">Samsung</option>
    <option value="apple">Apple</option>
    <option value="xiaomi">Xiaomi</option>
  </select>

  <button type="submit">Qo'shish</button>
</form>

<script>

  // Rasmni ko'rsatish
  const imageInput = document.getElementById("image");
  const preview = document.getElementById("preview");
  let imageBase64 = "";

  imageInput.addEventListener("change", function() {
    const file = this.files[0];
    const reader = new FileReader();

    reader.onload = function(e) {
      imageBase64 = e.target.result; // Base64
      preview.src = imageBase64;
      preview.style.display = "block";
    };

    reader.readAsDataURL(file);
  });

  document.getElementById("productForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const product = {
      id: Date.now(),   // avtomatik ID
      name: document.getElementById("name").value,
      price: document.getElementById("price").value,
      image: imageBase64,     // rasm endi Base64
      category: document.getElementById("category").value
    };

    let products = JSON.parse(localStorage.getItem("products")) || [];
    products.push(product);
    localStorage.setItem("products", JSON.stringify(products));

    alert("Mahsulot qo'shildi!");
    e.target.reset();
    preview.style.display = "none";
  });
</script>

</body>
</html>
